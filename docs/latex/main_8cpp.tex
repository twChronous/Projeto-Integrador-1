\doxysection{src/main.cpp File Reference}
\hypertarget{main_8cpp}{}\label{main_8cpp}\index{src/main.cpp@{src/main.cpp}}


Receptor ESP-\/\+NOW com servidor web para monitoramento de sensores.  


{\ttfamily \#include $<$Arduino.\+h$>$}\newline
{\ttfamily \#include $<$Wi\+Fi.\+h$>$}\newline
{\ttfamily \#include $<$esp\+\_\+now.\+h$>$}\newline
{\ttfamily \#include $<$Web\+Server.\+h$>$}\newline
{\ttfamily \#include "{}Structs.\+h"{}}\newline
{\ttfamily \#include $<$esp\+\_\+wifi.\+h$>$}\newline
{\ttfamily \#include "{}Config.\+h"{}}\newline
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{main_8cpp_a48f3f185be3ea2d153c347a157b38d42}\label{main_8cpp_a48f3f185be3ea2d153c347a157b38d42} 
Web\+Server {\bfseries server} (80)
\begin{DoxyCompactList}\small\item\em Servidor web na porta 80. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{main_8cpp_ac20a66c7fb6b4fd2c9bf8596cb84c3ed}{configure\+Esp\+Now\+Channel}} ()
\begin{DoxyCompactList}\small\item\em Configura o canal e região do Wi\+Fi para ESP-\/\+NOW. \end{DoxyCompactList}\item 
String \mbox{\hyperlink{main_8cpp_a5e377fcaea9800e010257d907fa3ac40}{formatar\+Dados\+HTML}} ()
\begin{DoxyCompactList}\small\item\em Gera página HTML com dados dos sensores. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{main_8cpp_a3b8d0ea36f43c7ebc823a650eb5eb5e6}{on\+Esp\+Now\+Receive}} (const esp\+\_\+now\+\_\+recv\+\_\+info\+\_\+t \texorpdfstring{$\ast$}{*}info, const uint8\+\_\+t \texorpdfstring{$\ast$}{*}incoming\+Data, int len)
\begin{DoxyCompactList}\small\item\em Callback para recebimento de dados via ESP-\/\+NOW. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{main_8cpp_a8427468f39342a1990703e9f5ce7fd29}{handle\+Root}} ()
\begin{DoxyCompactList}\small\item\em Rota principal do servidor web. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{main_8cpp_a32dd9fdedebff2ab3caf4958bd2ce0f6}{handle\+JSON}} ()
\begin{DoxyCompactList}\small\item\em Gera resposta JSON com dados dos sensores. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{main_8cpp_a4fc01d736fe50cf5b977f755b675f11d}{setup}} ()
\begin{DoxyCompactList}\small\item\em Função de configuração inicial do sistema. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{main_8cpp_afe461d27b9c48d5921c00d521181f12f}{loop}} ()
\begin{DoxyCompactList}\small\item\em Função de loop principal. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{main_8cpp_ad0adcaaa7fe371f2d4aa410680af4fd8}\label{main_8cpp_ad0adcaaa7fe371f2d4aa410680af4fd8} 
\mbox{\hyperlink{struct_sensor_data}{Sensor\+Data}} {\bfseries dados\+Recebidos} = \{0\}
\begin{DoxyCompactList}\small\item\em Dados globais recebidos via ESP-\/\+NOW. \end{DoxyCompactList}\item 
\Hypertarget{main_8cpp_a3a28290fd188e622b4489dd78b2b4b35}\label{main_8cpp_a3a28290fd188e622b4489dd78b2b4b35} 
volatile bool {\bfseries dados\+Atualizados} = false
\begin{DoxyCompactList}\small\item\em Flag para indicar atualização de dados. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Receptor ESP-\/\+NOW com servidor web para monitoramento de sensores. 

\begin{DoxyVersion}{Version}
1.\+1 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
May/2025 
\end{DoxyDate}
\begin{DoxyAuthor}{Author}
Lucas Mateus 
\end{DoxyAuthor}


\doxysubsection{Function Documentation}
\Hypertarget{main_8cpp_ac20a66c7fb6b4fd2c9bf8596cb84c3ed}\index{main.cpp@{main.cpp}!configureEspNowChannel@{configureEspNowChannel}}
\index{configureEspNowChannel@{configureEspNowChannel}!main.cpp@{main.cpp}}
\doxysubsubsection{\texorpdfstring{configureEspNowChannel()}{configureEspNowChannel()}}
{\footnotesize\ttfamily \label{main_8cpp_ac20a66c7fb6b4fd2c9bf8596cb84c3ed} 
void configure\+Esp\+Now\+Channel (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Configura o canal e região do Wi\+Fi para ESP-\/\+NOW. 

Esta função define as configurações de país e canal para comunicação ESP-\/\+NOW, garantindo compatibilidade regulatória e configuração correta do canal. \Hypertarget{main_8cpp_a5e377fcaea9800e010257d907fa3ac40}\index{main.cpp@{main.cpp}!formatarDadosHTML@{formatarDadosHTML}}
\index{formatarDadosHTML@{formatarDadosHTML}!main.cpp@{main.cpp}}
\doxysubsubsection{\texorpdfstring{formatarDadosHTML()}{formatarDadosHTML()}}
{\footnotesize\ttfamily \label{main_8cpp_a5e377fcaea9800e010257d907fa3ac40} 
String formatar\+Dados\+HTML (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Gera página HTML com dados dos sensores. 

\begin{DoxyReturn}{Returns}
String contendo o HTML formatado com dados dos sensores
\end{DoxyReturn}
Cria uma página web responsiva com tabela de dados de sensores, incluindo atualização automática a cada 2 segundos. \Hypertarget{main_8cpp_a32dd9fdedebff2ab3caf4958bd2ce0f6}\index{main.cpp@{main.cpp}!handleJSON@{handleJSON}}
\index{handleJSON@{handleJSON}!main.cpp@{main.cpp}}
\doxysubsubsection{\texorpdfstring{handleJSON()}{handleJSON()}}
{\footnotesize\ttfamily \label{main_8cpp_a32dd9fdedebff2ab3caf4958bd2ce0f6} 
void handle\+JSON (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Gera resposta JSON com dados dos sensores. 

Cria uma estrutura JSON organizada com informações de altímetro, acelerômetro e timestamp. \Hypertarget{main_8cpp_a8427468f39342a1990703e9f5ce7fd29}\index{main.cpp@{main.cpp}!handleRoot@{handleRoot}}
\index{handleRoot@{handleRoot}!main.cpp@{main.cpp}}
\doxysubsubsection{\texorpdfstring{handleRoot()}{handleRoot()}}
{\footnotesize\ttfamily \label{main_8cpp_a8427468f39342a1990703e9f5ce7fd29} 
void handle\+Root (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Rota principal do servidor web. 

Renderiza a página HTML com os dados dos sensores \Hypertarget{main_8cpp_afe461d27b9c48d5921c00d521181f12f}\index{main.cpp@{main.cpp}!loop@{loop}}
\index{loop@{loop}!main.cpp@{main.cpp}}
\doxysubsubsection{\texorpdfstring{loop()}{loop()}}
{\footnotesize\ttfamily \label{main_8cpp_afe461d27b9c48d5921c00d521181f12f} 
void loop (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Função de loop principal. 

Mantém o servidor web processando requisições e garante funcionamento contínuo do sistema. \Hypertarget{main_8cpp_a3b8d0ea36f43c7ebc823a650eb5eb5e6}\index{main.cpp@{main.cpp}!onEspNowReceive@{onEspNowReceive}}
\index{onEspNowReceive@{onEspNowReceive}!main.cpp@{main.cpp}}
\doxysubsubsection{\texorpdfstring{onEspNowReceive()}{onEspNowReceive()}}
{\footnotesize\ttfamily \label{main_8cpp_a3b8d0ea36f43c7ebc823a650eb5eb5e6} 
void on\+Esp\+Now\+Receive (\begin{DoxyParamCaption}\item[{const esp\+\_\+now\+\_\+recv\+\_\+info\+\_\+t \texorpdfstring{$\ast$}{*}}]{info}{, }\item[{const uint8\+\_\+t \texorpdfstring{$\ast$}{*}}]{incoming\+Data}{, }\item[{int}]{len}{}\end{DoxyParamCaption})}



Callback para recebimento de dados via ESP-\/\+NOW. 


\begin{DoxyParams}{Parameters}
{\em info} & Informações sobre o remetente \\
\hline
{\em incoming\+Data} & Ponteiro para os dados recebidos \\
\hline
{\em len} & Tamanho dos dados recebidos\\
\hline
\end{DoxyParams}
Processa os dados recebidos, verifica integridade e atualiza variáveis globais com informações dos sensores. \Hypertarget{main_8cpp_a4fc01d736fe50cf5b977f755b675f11d}\index{main.cpp@{main.cpp}!setup@{setup}}
\index{setup@{setup}!main.cpp@{main.cpp}}
\doxysubsubsection{\texorpdfstring{setup()}{setup()}}
{\footnotesize\ttfamily \label{main_8cpp_a4fc01d736fe50cf5b977f755b675f11d} 
void setup (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Função de configuração inicial do sistema. 

Inicializa comunicação serial, configura Wi\+Fi, ESP-\/\+NOW e servidor web para monitoramento de sensores. 